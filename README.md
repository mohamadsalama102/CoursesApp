# CoursesApp

## Description
This is an educational server-side app, mainly a simulation of Udemy, where a user can be a student, an instructor or both at the same time.
The main goal of building this app is for me to try using Microservices and apply some concepts like containerization, event-based communication, a message broker, API Gateway, gRPC, ... etc, mainly using Microsoft technologies.

## Application Architecture
- A basic microservices architecture is implemented where each microservice runs in a single docker container, each has its own database, each database in a single container as well. Each container is deployed to Kubernetes in a single pod.
- Communication between services is implemented both synchronously using gRPC and asynchronously using RabbitMQ as a message broker.
- Services can externally be accessed only via an Ocelot API gateway which is accessed via a load balancer with the following port: http://localhost:9999.
- The app consists of three services:
    - The Catalog service, which is responsible for dealing with courses.
        - The Catalog service follows the N-Tier Architecture.
    - The Enrolling service, which is responsible for the enrolling and payment process.
    - And finally the Identity service, responsible for generating access and refresh tokens and for users' accounts.
- Repository pattern is implemented for data access.

## Key Features
- All services run on .NET 6 and use Entity Framework Core 6 as an ORM and MS SQL Server 2019 for the databases.
- Authentication is implemented using JWT and ASP.NET Core Identity.
- Email confimation.
- Two-factor authentication.
- JWTs are generated by the Identity microservice, but each microservice handles its authentication and authorization independently.
- Unit tests are implemented using the xUnit framework and repositories are tested against a real SQL Server database.
- Videos and images are stored on a cloud service, which is Cloudinary, while other types of files are stored on the local server.
- Payments support through Stripe and Stripe is tested using a JavaScript client.
- Email service via SMTP Server.
- Methods are implemented asynchronously.
- Global error handling for all the services in the API Gateway.

## User Perspective
- In CoursesApp an anonymous user you can:
    - Search courses and get a paginated result. they can also apply filtering and sorting.
- An authenticated user can:
    - Create courses and enroll in other users' courses.
- An administrator user can:
    - Review courses before publishing and either approve or reject. They can also change other users' roles.
- The user does not create all of the course content at once, but rather they create a course draft where they can leave the app and come back later to continue. 
    - For example, There is a course draft section called Intended Learners to determine the course objective and who this course is for, a draft section called Landing Page to set the course title, preview video, etc, and another draft section called Curriculum to add the course sections which contain lectures and quizzes.
- To be authenticated the user have to register in the app, an email will be sent to confirm your email.

## Helpful resources to learn microservices in .NET:
- [Les Jackson's YouTube course](https://www.youtube.com/watch?v=DgVjEo3OGBI&t=19721s&ab_channel=LesJackson) which is suitable for beginners.
- Microsoft's free book .NET Microservices: Architecture for Containerized .NET Applications which is based on the [eShopOnContainers sample application](https://github.com/dotnet-architecture/eShopOnContainers) and more challenging.
